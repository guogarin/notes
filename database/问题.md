[toc]





&emsp;
&emsp;
## 1、 数据库的三大范式
> ① 第一范式:  每个列都不可以再拆分。
> ② 第二范式:  非主键列完全依赖于主键，而不能是依赖于主键的一部分.。
> ③ 第三范式:  非主键列只依赖于主键，不依赖于其他非主键。
> 
在设计数据库结构的时候,要尽量遵守三范式,如果不遵守,必须有足够的理由，比如性能。事实上我们经常会 为了性能而妥协数据库的设计。


&emsp;
## 2、Mysql有哪些部分组成以及作用
MySQL 可以分为 Server层 和 存储引擎层 两部分
server包括了如下4个部分：
> ① 连接器: 管理连接, 权限验证.
> ② 分析器: 词法分析, 语法分析.
> ③ 优化器: 执行计划生成, 索引的选择.
> ④ 执行器: 操作存储引擎, 返回执行结果.
> 
https://www.jianshu.com/p/05e36feb8bec
https://blog.csdn.net/qq_41820066/article/details/127077095
2、储存引擎

存储数据, 提供读写接口.


&emsp;
## 3、字段为什么要求定义成not null
MySQL官网这样介绍:

NULL columns require additional space in the rowto record whether their values are NULL. For MyISAM tables, each NULL columntakes one bit extra, rounded up to the nearest byte.
null值会占用更多的字节,且会在程序中造成很多与预期不符的情况.


&emsp;
## 4、ACID是什么？可以详细说一下嘛
A=Atomicity

原子性就是上面说的,要么全部成功,要么全部失败.不可能只执行一部分操作。

C=Consistency

一致性系统(数据库)总是从一个一致性的状态转移到另一个一致性的状态,不会存在中间状态.

I=Isolation

隔离性通常来说:一个事务在完全提交之前,对其他事务是不可见的.注意前面的通常来说加了红色,意味着 有例外情况.

D=Durability

持久性一旦事务提交,那么就永远是这样子了,哪怕系统崩溃也不会影响到这个事务的结果.



&emsp;
## 5、同时有多个事务正在进行提交，会怎么样呢？
事务（transaction）是作为一个单元的一组有序的数据库操作。如果组中的所有操作都成功， 则认为 事务成功， 即使只有一个操作失败， 事务也不成功。如果所有操作完成， 事务则提交， 其修改将作用 于所有其他数据库进程。如果一个操作失败， 则事务将回滚， 该事务所有操作的影响都将取消。

事务特性
原子性即不可分割性， 事务要么全部被执行， 要么就全部不被执行。

一致性或可串性事务的执行使得数据库从一种正确状态转换成另一种正确状 态

隔离性在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何 其他事务，

持久性事务正确提交后， 其结果将永久保存在数据库中， 即使在事务提交后有了其他故障， 事务 的处理结果也会得到保存。或者这样理解：事务就是被绑定在一起作为一个逻辑工作单元的 SQL 语句分 组， 如果任何一个语句操作失败那么整个操作就被失败， 以后操作就会回滚到操作前状态， 或者是上 有个节点。为了确保要么执行， 要么不执行， 就可以使用事务。要将有组语句作为事务考虑， 就需要 通过 ACID 测试， 即原子性， 一致性， 隔离性和持久性。


&emsp;
## 6、Mysql索引分哪些？
从数据结构角度
1、B+树索引(O(log(n)))：关于B+树索引，

2、hash索引： a 仅仅能满足"=","IN"和"<=>"查询，不能使用范围查询 b 其检索效率非常高，索引的检索可以一次定位，不像B-Tree 索引需要从根节点到枝节点，最后才能访问到页节点这样多次的IO访问，所以 Hash 索引的查询效率要远高于 B-Tree 索引 c 只有Memory存储引擎显示支持hash索引

3、FULLTEXT索引（现在MyISAM和InnoDB引擎都支持了）

4、R-Tree索引（用于对GIS数据类型创建SPATIAL索引）

从物理存储角度
1、聚集索引（clustered index）

2、非聚集索引（non-clustered index）

聚集索引和非聚集索引的区别如下：

聚集索引和非聚集索引的根本区别是表记录的排列顺序和与索引的排列顺序是否一致，聚集索引表记录的排列顺序与索引的排列顺序一致，优点是查询速度快，因为一旦 具有第一个索引值的纪录被找到，具有连续索引值的记录也一定物理的紧跟其后。

聚集索引的缺点是对表进行修改速度较慢，这是为了保持表中的记录的物理顺序与索 引的顺序一致，而把记录插入到数据页的相应位置，必须在数据页中进行数据重排， 降低了执行速度。非聚集索引指定了表中记录的逻辑顺序，但记录的物理顺序和索引的顺序不一致，聚集索引和非聚集索引都采用了B+树的结构，但非聚集索引的叶子层并不与实际的

从逻辑角度
1、主键索引：主键索引是一种特殊的唯一索引，不允许有空值

2、普通索引或者单列索引

3、多列索引（复合索引）：复合索引指多个字段上创建的索引，只有在查询条件中使用了创建索引时的第一个字段，索引才会被使用。使用复合索引时遵循最左前缀集合

4、唯一索引或者非唯一索引

5、空间索引：空间索引是对空间数据类型的字段建立的索引，MYSQL中的空间数据类型有4种，分别是GEOMETRY、POINT、LINESTRING、POLYGON。MYSQL使用SPATIAL关键字进行扩展，使得能够用于创建正规索引类型的语法创建空间索引。创建空间索引的列，必须将其声明为NOT NULL，空间索引只能在存储引擎为MYISAM的表中创建

CREATE TABLE table_name[col_name data type]  [unique|fulltext|spatial][index|key][index_name](col_name[length])[asc|desc]
1、unique|fulltext|spatial为可选参数，分别表示唯一索引、全文索引和空间索引；

2、index和key为同义词，两者作用相同，用来指定创建索引

3、col_name为需要创建索引的字段列，该列必须从数据表中该定义的多个列中选择；

4、index_name指定索引的名称，为可选参数，如果不指定，MYSQL默认col_name为索引值；

5、length为可选参数，表示索引的长度，只有字符串类型的字段才能指定索引长度；

6、asc或desc指定升序或降序的索引值存储


&emsp;
## 7、建立了主键索引还可以建立唯一索引吗？
一、主键与索引的区别如下：
主键是一种约束，唯一索引是一种索引，两者在本质上是不同的。

主键创建后一定包含一个唯一性索引，唯一性索引并不一定就是主键。

唯一性索引列允许空值，而主键列不允许为空值。

主键列在创建时，已经默认不为空值 + 唯一索引了。

主键可以被其他表引用为外键，而唯一索引不能。

一个表最多只能创建一个主键，但可以创建多个唯一索引。

主键更适合那些不容易更改的唯一标识，如自动递增列、身份证号等。

二、回答
主键是一种约束，目的是对这个表的某一列进行限制； 唯一索引是一种索引，索引是数据库表的一个冗余结构，目的是为了更好的查询； 主键列不允许为空值，而唯一性索引列允许空值； 一个表最多只能一个主键，但是可以包含多个唯一索引；

1、一个表中可以有多个唯一索引，但是只能有一个主键。

2、主键一定是唯一性索引，唯一性索引并不一定就是主键

主键不允许为空，唯一键允许为空，空值不受唯一约束，也就是说可以有多个空值。

注：可以多列组合成一个唯一索引或者一个主键，即组合索引或组合主键


&emsp;
## 8、建立索引常用的知识和规则如下：
1、表的主键、外键必须有索引； 2、数据量超过300的表应该有索引； 3、经常与其他表进行连接的表，在连接字段上应该建立索引； 4、经常出现在Where子句中的字段，特别是大表的字段，应该建立索引； 5、索引应该建在选择性高的字段上； 6、索引应该建在小字段上，对于大的文本字段甚至超长字段，不要建索引； 7、复合索引的建立需要进行仔细分析；尽量考虑用单字段索引代替： 8、频繁进行数据操作的表，不要建立太多的索引； 9、删除无用的索引，避免对执行计划造成负面影响；